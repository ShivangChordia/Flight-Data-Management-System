// History.razor
@page "/history"
<h2>Flight Data History</h2>
<input @bind="SearchTerm" @placeholder="Enter aircraft tail number..." />
<button @onclick="SearchHistory">Search</button>
@if (HasResults)
{
    <table>
        <thead>
            <tr><th>Tail Number</th><th>Date</th><th>G-Force</th><th>Attitude</th><th>Altitude</th></tr>
        </thead>
        <tbody>
            @foreach (var item in SearchResults)
            {
                <tr>
                    <td>@item.TailNumber</td>
                    <td>@item.Date.ToString("yyyy-MM-dd HH:mm:ss")</td>
                    <td>@item.GForce</td>
                    <td>@item.Attitude</td>
                    <td>@item.Altitude ft</td>
                </tr>
            }
        </tbody>
    </table>
}
else if (!string.IsNullOrEmpty(SearchTerm))
{
    <p>No results found for "@SearchTerm"</p>
}

@code {
    private string SearchTerm { get; set; } = "";
    private List<FlightData> SearchResults { get; set; } = new List<FlightData>();
    private bool HasResults { get; set; } = false;

    private class FlightData
    {
        public string TailNumber { get; set; }
        public DateTime Date { get; set; }
        public double GForce { get; set; }
        public string Attitude { get; set; }
        public int Altitude { get; set; }
    }

    private void SearchHistory()
    {
        // Simulate database query (replace with real database call)
        HasResults = true;
        SearchResults = new List<FlightData>
        {
            new FlightData { TailNumber = "N12345", Date = DateTime.Now, GForce = 1.5, Attitude = "Level", Altitude = 30000 },
            new FlightData { TailNumber = "N67890", Date = DateTime.Now.AddHours(-1), GForce = 0.8, Attitude = "Banks", Altitude = 20000 },
            // Add more sample data as needed
        };
    }
}
